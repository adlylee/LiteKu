<style>
    a.disabled {
        pointer-events: none;
        cursor: default;
    }
</style>
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Hasil Observasi Balance Cairan</h3>
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#list" aria-controls="list" role="tab"
                            data-toggle="tab">List</a></li>
                    <li role="presentation"><a href="#input" aria-controls="input" role="tab"
                            data-toggle="tab">Input</a></li>
                </ul>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div id="notif"></div>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade in active" role="tabpanel" id="list">
                        <table class="table table-responsive table-striped no-padding dataTables" width="100%">
                            <thead>
                                <tr>
                                    <th>Tanggal / Jam</th>
                                    <th>Makan</th>
                                    <th>Minum</th>
                                    <th>Infus</th>
                                    <th>Total Intake</th>
                                    <th>Muntah</th>
                                    <th>Urine</th>
                                    <th>BAB</th>
                                    <th>Total Outtake</th>
                                    <th>BC</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {loop: $bc.list}
                                <tr>
                                    <td>{$value.tanggal} / {$value.bc_ke}</td>
                                    <td>{$value.makan}</td>
                                    <td>{$value.minum}</td>
                                    <td>{$value.infus}</td>
                                    <td>{$value.total_in}</td>
                                    <td>{$value.muntah}</td>
                                    <td>{$value.urine}</td>
                                    <td>{$value.bab}</td>
                                    <td>{$value.total_out}</td>
                                    <td>{$value.totalall}</td>
                                    <td>
                                        <!-- <a href="{?=url([ADMIN, 'rawat_inap', 'balancecairan?id='.$value.id])?}" class="btn btn-success" {if: $value.muntah != ""}disabled{/if}>Ubah</a> -->
                                        <a href="{?=url([ADMIN, 'rawat_inap', 'balancecairan?id='.$value.id])?}"
                                            class="btn btn-success {if: $value.muntah !='' }disabled{/if}">Isi
                                            Outtake</a>
                                        <a href="#{$value.id}" onclick="fiturDelete('{$value.id}')"
                                            class="btn btn-danger {if: $value.muntah !='' }disabled{/if}">Hapus</a>
                                    </td>
                                </tr>
                                {/loop}
                            </tbody>
                        </table>
                        {if: $bc.no_rawatcon != ''}
                        <a href="{?=url([ADMIN, 'rawat_inap', 'balancecairan?no_rawat='.$bc.no_rawatcon])?}"
                            class="btn btn-danger">Tampilkan Semua</a>
                        {/if}
                    </div>
                    <div class="tab-pane fade in" role="tabpanel" id="input">
                        {include: ../plugins/rawat_inap/view/admin/form.balance.html}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $('.dataTables').DataTable({
        "order": [[3, "desc"]],
        "pagingType": "full",
        "language": {
            "paginate": {
                "first": "&laquo;",
                "last": "&raquo;",
                "previous": "‹",
                "next": "›"
            },
            "search": "",
            "searchPlaceholder": "Search..."
        },
        "lengthChange": false,
        "scrollX": true,
        dom: "<<'data-table-title'><'datatable-search'f>><'row'<'col-sm-12'tr>><<'pmd-datatable-pagination' l i p>>"
    });

    function fiturDelete(params) {
        var conf = confirm('Apakah Ingin Dihapus');
        if (conf == true) {
            var obj = new Object();
            obj.id = params;
            var jsonString = JSON.stringify(obj);
            // console.log(jsonString);
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    alert(this.responseText);
                }
            };
            xhttp.open("POST", "{?=url([ADMIN,'rawat_inap','balancecairanhapus'])?}", true);
            xhttp.setRequestHeader("Content-type", "application/json");
            xhttp.send(jsonString);
            window.location.reload()
        }
    }
</script>